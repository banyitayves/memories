// ==================== Multi-Language Support ====================

const translations = {
    en: {
        sections: 'Sections',
        aiGenerate: 'AI-Powered Lesson Generation',
        aiDescribe: 'Fill in a few details and let AI generate a complete lesson plan for you!',
        lessonTitle: 'Lesson Title',
        subject: 'Subject',
        class: 'Class/Grade',
        duration: 'Duration (minutes)',
        classSize: 'Class Size',
        learningObjective: 'Learning Objective',
        aiOptions: 'AI Options',
        includeActivities: 'Include Teaching Activities',
        includeAssessment: 'Include Assessment Methods',
        includeResources: 'Suggest Resources',
        generateBtn: 'Generate Lesson Plan',
        generating: 'Generating your lesson plan...',
        generatedPlan: 'Generated Lesson Plan',
        basicInfo: 'Basic Information (REB Format)',
        schoolName: 'School Name',
        teacherName: 'Teacher Name',
        date: 'Date',
        unitNumber: 'Unit Number',
        unitDetails: 'Unit Details',
        lessonDetails: 'Lesson Plan Details',
        senNeeds: 'Type of Special Educational Needs (SEN)',
        unitTitle: 'Unit Title',
        keyCompetencies: 'Key Unit Competencies',
        numberOfLessons: 'Number of Lessons',
        instructionalObjective: 'Instructional Objective',
        planLessons: 'Plan for Lessons',
        lessonNum: 'Lesson #',
        topicTitle: 'Topic/Title',
        timing: 'Timing (minutes)',
        resources: 'Resources',
        addLesson: 'Add Lesson',
        genericCompetencies: 'Generic Competencies & Cross Cutting Issues',
        crossCutting: 'Cross Cutting Issues',
        lessonDelivery: 'Lesson Delivery Timeline & Activities',
        phase: 'Phase',
        teacherActivities: 'Teacher Activities (min)',
        learnerActivities: 'Learner Activities (min)',
        competencies: 'Generic Competencies',
        introduction: 'Introduction/Motivation',
        development: 'Development of the Lesson',
        conclusion: 'Conclusion/Wrap-up',
        assessmentMethods: 'Assessment Methods',
        formativeAssessment: 'Formative Assessment Strategies',
        summativeAssessment: 'Summative Assessment Activity',
        observation: 'Classroom Observation',
        questioning: 'Questioning & Discussion',
        writtenTests: 'Written Tests/Quizzes',
        practical: 'Practical Activities',
        projects: 'Projects/Assignments',
        groupWork: 'Group Work/Presentations',
        teachingReferences: 'Teaching & Learning References',
        references: 'References (Textbooks & Curriculum Documents)',
        referencesSection: 'References',
        addResource: 'Add Resource',
        addReference: 'Add Reference',
        teacherEvaluation: 'Teacher Self-Evaluation',
        specialNeeds: 'Special Needs/Inclusive Education Notes',
        previewLesson: 'Preview Lesson Plan',
        fillAndPreview: 'Fill in the form and click here to generate preview...',
        admin: 'Admin Panel'
    },
    sw: {
        sections: 'Sehemu',
        aiGenerate: 'Kuzalisha Mpango wa Somo Kwa Msaada wa AI',
        aiDescribe: 'Jaza maelezo machache na AI itauliza mpango kamili wa somo!',
        lessonTitle: 'Kichwa cha Somo',
        subject: 'Somo',
        class: 'Darasa/Kiwango',
        duration: 'Muda (dakika)',
        classSize: 'Idadi ya Wanafunzi',
        learningObjective: 'Lengo la Kujifunza',
        aiOptions: 'Chaguo za AI',
        includeActivities: 'Jumuisha Shughuli za Kufundisha',
        includeAssessment: 'Jumuisha Njia za Tathmini',
        includeResources: 'Pendekeza Vyanzo',
        generateBtn: 'Zalisha Mpango wa Somo',
        generating: 'Inazalisha mpango wako wa somo...',
        generatedPlan: 'Mpango wa Somo Unaozalishwa',
        basicInfo: 'Maelezo ya Msingi (Muundo wa REB)',
        schoolName: 'Jina la Shule',
        teacherName: 'Jina la Mwalimu',
        date: 'Tarehe',
        unitNumber: 'Namba ya Sehemu',
        unitDetails: 'Maelezo ya Sehemu',
        lessonDetails: 'Maelezo ya Mpango wa Somo',
        senNeeds: 'Aina ya Mahitaji ya Kielimu Mahususi (SEN)',
        unitTitle: 'Kichwa cha Sehemu',
        keyCompetencies: 'Uwezo Makuu wa Sehemu',
        numberOfLessons: 'Idadi ya Masomo',
        instructionalObjective: 'Lengo la Kufundisha',
        planLessons: 'Panga Masomo',
        lessonNum: 'Somo #',
        topicTitle: 'Kichwa/Mada',
        timing: 'Muda (dakika)',
        resources: 'Vyanzo',
        addLesson: 'Ongeza Somo',
        genericCompetencies: 'Uwezo wa Kawaida na Suala Linalopigia Mkakati',
        crossCutting: 'Suala Linalopigia Mkakati',
        lessonDelivery: 'Wakati wa Kumletea Somo na Shughuli',
        phase: 'Awamu',
        teacherActivities: 'Shughuli za Mwalimu (dakika)',
        learnerActivities: 'Shughuli za Wanafunzi (dakika)',
        competencies: 'Uwezo wa Kawaida',
        introduction: 'Utangulizi/Motisha',
        development: 'Maendeleo ya Somo',
        conclusion: 'Kumalizia/Kupitia Muhtasari',
        assessmentMethods: 'Njia za Tathmini',
        formativeAssessment: 'Mikakati ya Tathmini ya Wanajua',
        summativeAssessment: 'Shughuli ya Tathmini ya Mwisho',
        observation: 'Uchunuzi wa Darasa',
        questioning: 'Kuuliza na Mijadala',
        writtenTests: 'Mtihani/Quizzes wa Maandishi',
        practical: 'Shughuli za Vitendo',
        projects: 'Miradi/Jukumu',
        groupWork: 'Kazi ya Kikundi/Uwasilishaji',
        teachingReferences: 'Marejeleo ya Kufundisha na Kujifunza',
        references: 'Marejeleo (Vitabu na Nyaraka za Mtaala)',
        referencesSection: 'Marejeleo',
        addResource: 'Ongeza Chanzo',
        addReference: 'Ongeza Marejeleo',
        teacherEvaluation: 'Tathmini Mwenyewe ya Mwalimu',
        specialNeeds: 'Vidokezo Vya Mahitaji Mahususi/Kielimu Linaloumbuki',
        previewLesson: 'Hakiki Mpango wa Somo',
        fillAndPreview: 'Jaza fomu na bofya hapa ili kuzalisha hakiki...',
        admin: 'Paneli la Administrata'
    },
    fr: {
        sections: 'Sections',
        aiGenerate: 'Générer des Plans de Cours avec l\'IA',
        aiDescribe: 'Remplissez quelques détails et laissez l\'IA générer un plan de cours complet pour vous!',
        lessonTitle: 'Titre de la Leçon',
        subject: 'Sujet',
        class: 'Classe/Niveau',
        duration: 'Durée (minutes)',
        classSize: 'Nombre d\'Élèves',
        learningObjective: 'Objectif d\'Apprentissage',
        aiOptions: 'Options de l\'IA',
        includeActivities: 'Inclure les Activités d\'Enseignement',
        includeAssessment: 'Inclure les Méthodes d\'Évaluation',
        includeResources: 'Suggérer des Ressources',
        generateBtn: 'Générer le Plan de Cours',
        generating: 'Génération de votre plan de cours...',
        generatedPlan: 'Plan de Cours Généré',
        basicInfo: 'Informations de Base (Format REB)',
        schoolName: 'Nom de l\'École',
        teacherName: 'Nom de l\'Enseignant',
        date: 'Date',
        unitNumber: 'Numéro d\'Unité',
        unitDetails: 'Détails de l\'Unité',
        lessonDetails: 'Détails du Plan de Cours',
        senNeeds: 'Type de Besoins Éducatifs Spéciaux (BES)',
        unitTitle: 'Titre de l\'Unité',
        keyCompetencies: 'Compétences Clés de l\'Unité',
        numberOfLessons: 'Nombre de Leçons',
        instructionalObjective: 'Objectif d\'Enseignement',
        planLessons: 'Planifier les Leçons',
        lessonNum: 'Leçon #',
        topicTitle: 'Titre/Sujet',
        timing: 'Durée (minutes)',
        resources: 'Ressources',
        addLesson: 'Ajouter une Leçon',
        genericCompetencies: 'Compétences Génériques et Problèmes Transversaux',
        crossCutting: 'Problèmes Transversaux',
        lessonDelivery: 'Calendrier et Activités de Distribution',
        phase: 'Phase',
        teacherActivities: 'Activités de l\'Enseignant (min)',
        learnerActivities: 'Activités de l\'Apprenant (min)',
        competencies: 'Compétences Génériques',
        introduction: 'Introduction/Motivation',
        development: 'Développement de la Leçon',
        conclusion: 'Conclusion/Résumé',
        assessmentMethods: 'Méthodes d\'Évaluation',
        formativeAssessment: 'Stratégies d\'Évaluation Formative',
        summativeAssessment: 'Activité d\'Évaluation Sommative',
        observation: 'Observation de l\'Académie',
        questioning: 'Questions et Discussion',
        writtenTests: 'Tests/Quiz Écrits',
        practical: 'Activités Pratiques',
        projects: 'Projets/Devoirs',
        groupWork: 'Travail de Groupe/Présentations',
        teachingReferences: 'Références d\'Enseignement et d\'Apprentissage',
        references: 'Références (Manuels et Documents du Curriculum)',
        referencesSection: 'Références',
        addResource: 'Ajouter une Ressource',
        addReference: 'Ajouter une Référence',
        teacherEvaluation: 'Auto-Évaluation de l\'Enseignant',
        specialNeeds: 'Notes sur les Besoins Spéciaux/Éducation Inclusive',
        previewLesson: 'Aperçu du Plan de Cours',
        fillAndPreview: 'Remplissez le formulaire et cliquez ici pour générer un aperçu...',
        admin: 'Panneau d\'Administration'
    },
    rw: {
        sections: 'Ingingo',
        aiGenerate: 'Kubyara Ibisasi by\'Amashuri Ukoresha AI',
        aiDescribe: 'Uzuza ibyinformasi bike maze AI itakubyara ibisasi kompletike by\'amashuri!',
        lessonTitle: 'Umutwe w\'Isomo',
        subject: 'Isomo',
        class: 'Icyiciro/Urwego',
        duration: 'Igihe (iminota)',
        classSize: 'Umubare w\'Abanyeshuri',
        learningObjective: 'Intego y\'Kwigira',
        aiOptions: 'Ibigaragambire by\'AI',
        includeActivities: 'Gumemukabyara Igikorwa cy\'Imfundikazi',
        includeAssessment: 'Gumemukabyara Inzira z\'Ipimishaji',
        includeResources: 'Tanga Inzira za Serivise',
        generateBtn: 'Byara Ibisasi by\'Isomo',
        generating: 'Byarwaho ibisasi byacu by\'isomo...',
        generatedPlan: 'Ibisasi by\'Isomo Byabyawe',
        basicInfo: 'Iyambere Amakuru (Imiterere ya REB)',
        schoolName: 'Izina ry\'Ishuri',
        teacherName: 'Izina ry\'Umfundikazi',
        date: 'UbwiBahe',
        unitNumber: 'Umubare w\'Igice',
        unitDetails: 'Ibyinformasi by\'Igice',
        lessonDetails: 'Ibyinformasi by\'Ibisasi by\'Isomo',
        senNeeds: 'Ubwoko bwa Serivise za Kwirukirana (SEN)',
        unitTitle: 'Umutwe w\'Igice',
        keyCompetencies: 'Iyobozi Ibigize Igice',
        numberOfLessons: 'Umubare w\'Amasomo',
        instructionalObjective: 'Intego y\'Imfundikazi',
        planLessons: 'Hasira Amasomo',
        lessonNum: 'Isomo #',
        topicTitle: 'Umutwe/Ingingo',
        timing: 'Igihe (iminota)',
        resources: 'Inzira',
        addLesson: 'Yongera Isomo',
        genericCompetencies: 'Ubugisha Bumvikane n\'Ikibazo Kiyambura',
        crossCutting: 'Ikibazo Kiyambura',
        lessonDelivery: 'Igenekerezo ry\'Igihe n\'Igikorwa',
        phase: 'Icyiciro',
        teacherActivities: 'Igikorwa cya Mfundikazi (iminota)',
        learnerActivities: 'Igikorwa cy\'Umwigire (iminota)',
        competencies: 'Ubugisha Bumvikane',
        introduction: 'Ubwiyunge/Ubushwebi',
        development: 'Gaturuka ry\'Isomo',
        conclusion: 'Intsinzi/Imigambi',
        assessmentMethods: 'Inzira z\'Ipimishaji',
        formativeAssessment: 'Inzira z\'Ipimishaji Mu Gihe cy\'Isomo',
        summativeAssessment: 'Igikorwa cy\'Ipimishaji mu Rihire',
        observation: 'Gukuramo Kwishuri',
        questioning: 'Kubuza n\'Gusobanura',
        writtenTests: 'Iteste/Quiz y\'Ikinyamakuru',
        practical: 'Igikorwa cy\'Ukuri',
        projects: 'Sisitemu/Yishyiramo',
        groupWork: 'Akazi k\'Itsinda/Kwigaragambira',
        teachingReferences: 'Amenya Imfundikazi n\'Kwigira',
        references: 'Amenya (Ibitabo n\'Dokumentimasangano)',
        referencesSection: 'Amenya',
        addResource: 'Yongera Inzira',
        addReference: 'Yongera Amenya',
        teacherEvaluation: 'Ipimishaji ry\'Umfundikazi ku w\'Ubwakire',
        specialNeeds: 'Inyandiko z\'Serivise za Kwirukirana/Imyigire Yambuka',
        previewLesson: 'Reba Ibisasi by\'Isomo',
        fillAndPreview: 'Uzuza fomu hanyuma ubike hano kugira ingiro...',
        admin: 'Ubwenge bw\'Ibigize'
    }
};

// Current language
let currentLanguage = localStorage.getItem('reb_language') || 'en';

// Change language
function changeLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('reb_language', lang);
    updateUILanguage();
    showToast(`✅ Language changed to ${lang === 'en' ? 'English' : lang === 'sw' ? 'Kiswahili' : lang === 'fr' ? 'Français' : 'Kinyarwanda'}`, 'success');
}

// Update UI language
function updateUILanguage() {
    const translationMap = translations[currentLanguage];
    
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translationMap[key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translationMap[key];
            } else {
                element.textContent = translationMap[key];
            }
        }
    });
}

// Get translation
function t(key) {
    return translations[currentLanguage]?.[key] || translations['en']?.[key] || key;
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    const languageSelect = document.getElementById('languageSelect');
    if (languageSelect) {
        languageSelect.value = currentLanguage;
    }
    updateUILanguage();
});
